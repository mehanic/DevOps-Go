–†–∞–∑–±–µ—Ä—ë–º —ç—Ç–æ—Ç –∫–æ–¥ Go –ø–æ—Å—Ç—Ä–æ—á–Ω–æ ‚Äî –æ–Ω –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç **–ø–æ–≤–µ–¥–µ–Ω–∏–µ `defer`**, –æ—Å–æ–±–µ–Ω–Ω–æ –ø—Ä–∏ –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã—Ö –≤—ã–∑–æ–≤–∞—Ö **–∞–Ω–æ–Ω–∏–º–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π** –∏ **—Ñ—É–Ω–∫—Ü–∏–π —Å –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏**.

---

## üî∏ –ö–æ–¥

```go
func getSomeVars() string {
	fmt.Println("getSomeVars execution")
	return "getSomeVats result"
}

func main() {
	defer fmt.Println("After work")
	defer func() {
		fmt.Println(getSomeVars())
	}()
	fmt.Println("Some userful work")
}
```

---

## üîç –ß—Ç–æ –¥–µ–ª–∞–µ—Ç `defer`

–û–ø–µ—Ä–∞—Ç–æ—Ä `defer` –æ—Ç–∫–ª–∞–¥—ã–≤–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ **–¥–æ –≤—ã—Ö–æ–¥–∞ –∏–∑ —Ç–µ–∫—É—â–µ–π —Ñ—É–Ω–∫—Ü–∏–∏** (`main` –≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ).

- –û—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ –≤—ã–∑–æ–≤—ã **–≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –æ–±—Ä–∞—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ**, **—Å—Ç–µ–∫–æ–º** (–ø–æ—Å–ª–µ–¥–Ω–∏–π defer ‚Äî –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–µ—Ä–≤—ã–º).

---

## ‚ñ∂ –ü–æ—à–∞–≥–æ–≤—ã–π —Ä–∞–∑–±–æ—Ä –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è `main()`

1. –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã–π –≤—ã–∑–æ–≤:  
   ```go
   defer fmt.Println("After work")
   ```

2. –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –µ—â—ë –æ–¥–∏–Ω `defer`, **–∞–Ω–æ–Ω–∏–º–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è**:
   ```go
   defer func() {
       fmt.Println(getSomeVars())
   }()
   ```
   ‚ö†Ô∏è **–í–Ω–∏–º–∞–Ω–∏–µ:** –∑–¥–µ—Å—å `getSomeVars()` **–ù–ï –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É**, –ø–æ—Ç–æ–º—É —á—Ç–æ —ç—Ç–æ **–∞–Ω–æ–Ω–∏–º–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è** ‚Äî –æ–Ω–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ `defer`, –∞ –Ω–µ —Å–µ–π—á–∞—Å.

3. –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä–æ–∫–∞:
   ```go
   fmt.Println("Some userful work")
   ```

4. –ü—Ä–æ–≥—Ä–∞–º–º–∞ –¥–æ—Ö–æ–¥–∏—Ç –¥–æ –∫–æ–Ω—Ü–∞ `main()`, –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã—Ö (`defer`) —Ñ—É–Ω–∫—Ü–∏–π **–≤ –æ–±—Ä–∞—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ**:

   - –°–Ω–∞—á–∞–ª–∞:
     ```go
     func() {
         fmt.Println(getSomeVars())
     }()
     ```

     –≠—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç:
     - `getSomeVars()` ‚Üí –ø–µ—á–∞—Ç–∞–µ—Ç `"getSomeVars execution"`
     - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–æ–∫—É ‚Üí `"getSomeVats result"`
     - `fmt.Println(...)` –ø–µ—á–∞—Ç–∞–µ—Ç –µ—ë.

   - –ü–æ—Ç–æ–º:
     ```go
     fmt.Println("After work")
     ```

---

## üñ®Ô∏è –ò—Ç–æ–≥–æ–≤—ã–π –≤—ã–≤–æ–¥:

```
Some userful work
getSomeVars execution
getSomeVats result
After work
```

---

## ‚úÖ –ß—Ç–æ –∑–¥–µ—Å—å –ø–æ–ª–µ–∑–Ω–æ –ø–æ–Ω—è—Ç—å

- `defer` —Å **—Ñ—É–Ω–∫—Ü–∏–µ–π** ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –µ—ë –≤—ã–∑–æ–≤ –Ω–∞ –ø–æ—Ç–æ–º.
- `defer` —Å **–∞–Ω–æ–Ω–∏–º–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π** ‚Äî —Å–∞–º–∞ —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è, **–µ—ë —Ç–µ–ª–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Ç–æ–º**.
- `defer funcCall(args)` ‚Äî –µ—Å–ª–∏ –≤—ã–∑–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –ø—Ä—è–º–æ, –æ–Ω–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è **–Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ**, –∞ `defer` —Ç–æ–ª—å–∫–æ –æ—Ç–ª–æ–∂–∏—Ç –µ—ë —Ä–µ–∑—É–ª—å—Ç–∞—Ç.
- –í—Å–µ `defer` –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è **–≤ –æ–±—Ä–∞—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ**.

---

–•–æ—á–µ—à—å, –ø–æ–∫–∞–∂—É —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É:
```go
defer fmt.Println(getSomeVars())
```
–∏
```go
defer func() { fmt.Println(getSomeVars()) }()
```?